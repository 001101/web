<div class="page-header">
    <h1>{{'dataBreachReport' | i18n}}</h1>
</div>
<p>{{'breachDesc' | i18n}}</p>
<i class="fa fa-spinner fa-spin text-muted" *ngIf="loading"></i>
<ng-container *ngIf="!loading">
    <p *ngIf="error">{{'reportError' | i18n}}...</p>
    <ng-container *ngIf="!error">
        <app-callout type="success" title="{{'goodNews' | i18n}}" *ngIf="!breachedAccounts.length">
            {{'breachEmailNotFound' | i18n : email}}
        </app-callout>
        <app-callout type="danger" title="{{'breachFound' | i18n}}" *ngIf="breachedAccounts.length">
            {{'breachEmailFound' | i18n : email : breachedAccounts.length}}
        </app-callout>
        <ul class="list-group list-group-breach" *ngIf="breachedAccounts.length">
            <li *ngFor="let a of breachedAccounts" class="list-group-item d-flex align-items-center">
                <div class="row">
                    <div class="col-2 text-center">
                        <img [src]="'https://haveibeenpwned.com/Content/Images/PwnedLogos/' + a.name + '.' + a.logoType" alt="" class="img-fluid">
                    </div>
                    <div class="col-7">
                        <h3>{{a.title}}</h3>
                        <p [innerHTML]="a.description"></p>
                        <p class="mb-1">{{'compromisedData' | i18n}}:</p>
                        <ul>
                            <li *ngFor="let d of a.dataClasses">{{d}}</li>
                        </ul>
                    </div>
                    <div class="col-3">
                        <dl>
                            <dt>{{'website' | i18n}}</dt>
                            <dd>{{a.domain}}</dd>
                            <dt>{{'affectedUsers' | i18n}}</dt>
                            <dd>{{a.pwnCount | number}}</dd>
                            <dt>{{'breachOccurred' | i18n}}</dt>
                            <dd>{{a.breachDate | date: 'mediumDate'}}</dd>
                            <dt>{{'breachReported' | i18n}}</dt>
                            <dd>{{a.addedDate | date: 'mediumDate'}}</dd>
                        </dl>
                    </div>
                </div>
            </li>
        </ul>
    </ng-container>
</ng-container>
